# 코드 품질 보증

## 자동 테스트?

- 코드를 변경한 이후에 여전히 프로그램 기능들이 정상적으로 동작한다는 것을 보장할 수 있도록 하기 위한 테스트
- Go testing 패키지, go test 도구를 사용하여 쉽게 작성 가능
- 프로그램의 일부 코드를 자동으로 실행하여 프로그램이 원래 목적에 맞게 잘 동작하는지 검증하기 위한 별도 프로그램



## 테스트 방법

- 테스트 코드는 테스트하려는 코드와 동일한 패키지에 속해야 함
  - 반드시 동일한 패키지에 속할 필요는 없으나 <u>패키지의 노출되지 않은 타입이나 함수에 접근</u>하려면 동일한 패키지에 속해야 함

- Go testing 패키지의 타입을 사용하려면 각 테스트 코드 맨 위에서 해당 패키지를 가져와야 함
- 파일 이름은 반드시 <u>XXX_test.go</u>로 생성
  - go test 명령 수행 시 패키지 내부에서 이 접미사를 가진 파일을 검색하게 됨
  - go build나 go install 시 무시하게 됨

- 테스트 함수의 이름은 Test로 시작(그 뒤로는 쓰고싶은대로! 단, 대문자로 시작하는 것이 좋음)

- 테스트 함수(TestXXXX)는 testing.T 값의 포인터를 받음

  - ```
    func TestXXXX(t *testing.T){}
    ```

- testing.T 값의 메서드(ex. Errorf)를 호출하여 실패한 테스트에 대한 보고 가능 (실패 원인을 설명하는 문자열)
- 헬퍼(helper) 함수?
  - _test.go 파일에서는 Test로 시작하는 함수만 go test 명령 수행시 실행
  - 그 외 함수들을 헬퍼 함수로 사용할 수 있음
    - 예를 들어 에러 메시지를 출력해준다거나 하는 errorString 같은 함수



## 테스트 주도 개발(TDD: Test-driven Development)

https://blog.naver.com/suresofttech/221569611618



## 부분 테스트

- 전체가 아닌 특정 테스트만 실행해야 하는 상황
  - 명령줄 플래그 이용
- 플래그(flag?) : 보통 대시(-)로 시작하는 하나 이상의 문자로 이루어진 인자
  - go test -v (verbose): 실행한 모든 테스트 함수의 이름과 테스트 결과 출력
  - go test -run Two : Two라는 문자열이 포함 된 테스트 함수들만 실행



## 테이블 주도 테스트

- 입력 데이터와 해당 입력에 대한 예상 값으로 이루어진 "테이블"을 사용하는 테스트 기법
- 테이블 형태에 대한 표준은 따로 없고 해당 테스트에서만 특수하게 사용할 새로운 타입을 정의하여 각 테스트에 대한 입력과 예상 출력값을 저장하는 것
- 코드 중복 등을 줄여 효율적으로 관리 가능

